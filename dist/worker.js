!function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);const s={jar:class{constructor(e){this.request=e,this.cookies=e?n.parse(e.headers.get("cookie")||""):{},this.futureCookies={}}get(e){return this.cookies[e]}set(e,t,r){this.futureCookies[e]={value:t,...r}}__remove(){}values(){var e=[];for(const[t,r]of Object.entries(this.futureCookies))e.push(n.serialize(t,r.value,r));return e}}};function a(e){var t="",r="0123456789abcdef";return new Uint8Array(e).forEach(e=>{t+=r[e>>4]+r[15&e]}),t}const o={uuidv4:()=>([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)),async hashPassword(e,t){var r=(t=t||{}).salt||crypto.getRandomValues(new Uint8Array(8)),n=t.iterations||45e3;"string"==typeof r&&(r=function(e){(e=e.replace(/^0x/,"")).length%2!=0&&console.log("WARNING: expecting an even number of characters in the hexString");var t=e.match(/[G-Z\s]/i);t&&console.log("WARNING: found non-hex characters",t);var r=e.match(/[\dA-F]{2}/gi).map((function(e){return parseInt(e,16)}));return new Uint8Array(r).buffer}(r));const s=new TextEncoder("utf-8").encode(e),o=await crypto.subtle.importKey("raw",s,{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),i=await crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:n,hash:"SHA-256"},o,{name:"AES-CBC",length:256},!0,["encrypt","decrypt"]);return`$PBKDF2;h=${a(await crypto.subtle.exportKey("raw",i))};s=${a(r)};i=${n};`},async validatePassword(e,t){for(var r={salt:t.split(";s=")[1].split(";")[0],iterations:t.split(";i=")[1].split(";")[0]},n=await this.hashPassword(e,r),s=!0,a=0;a<n.length;a++)n.charAt(a)!=t.charAt(a)&&(s=!1);return s}},i={version:"0.2.2",config:{debugHeaders:!0},accessControl:{allowOrigin:"*",allowMethods:"GET, POST, PUT",allowHeaders:"Content-Type"},request:null,_corsHeaders(){var e=this.accessControl.allowOrigin;return this.request&&(e=new URL(this.request.url).origin),{"Access-Control-Allow-Origin":e,"Access-Control-Allow-Methods":this.accessControl.allowMethods,"Access-Control-Max-Age":"1728000"}},injectCors(e,t){this._corsHeaders()},_genericResponse(e,t,r){void 0===r&&(r={});var n=r.headers||{},s=r.status||200,a=r.statusText||"OK",o=r.autoCors;void 0===r.autoCors&&(o=!0);var i=r.cookies||null,c=r.stopwatch||null,l={"Content-Type":e,...n};o&&(l={...l,...this._corsHeaders()});var h=new Response(t,{status:s,statusText:a,headers:l});return i&&i.values().forEach(e=>{h.headers.append("Set-Cookie",e)}),c&&h.headers.set("Server-Timing",c.getHeader()),this.config.debugHeaders&&h.headers.set("x-cfw-eu-version",this.version),h},cors(e){return e&&(this.request=e),new Response(null,{headers:this._corsHeaders()})},json(e,t){var r=e;return"string"!=typeof r&&(r=JSON.stringify(e)),this._genericResponse("application/json",r,t)},html(e,t){return this._genericResponse("text/html",e,t)},text(e,t){return this._genericResponse("plain/text",e,t)},fromResponse(e,t){var r={...this.headersToObject(e.headers),...t.headers||{}};"headers"in t&&delete t.headers;var n=JSON.parse(JSON.stringify(r["content-type"]));return"content-type"in r&&delete r["content-type"],this._genericResponse(n,e.body,{headers:r,...t})},async static(e,t){var r=t.baseUrl;if(!r)throw"You need to specify a baseUrl for response.static to work.";let n=new URL(e.url);var s=await fetch(`${r}${n.pathname.replace(t.routePrefix||"<>","")}`,{cf:{cacheTtl:t.ttl||600}});return this.fromResponse(s,t)},setHeader(e,t,r){var n=new Response(e.body,e),s=r;return"function"==typeof r.values?(s=r.values()).forEach(e=>{n.headers.append(t,e)}):n.headers.append(t,s),n},headersToObject:e=>Object.fromEntries(e.entries())};t.Stopwatch=class{constructor(){this.start=new Date,this.checkpoints=[{name:"Start",dur:0,desc:"Started recording"}],this.lastCheckpointTime=new Date}mark(e,t){console.log("Last checkpoint: ",this.lastCheckpointTime),console.log(new Date),console.log("Difference: ",new Date-this.lastCheckpointTime),this.checkpoints.push({name:e,time:new Date,dur:new Date-this.lastCheckpointTime,...t}),this.lastCheckpointTime=new Date}getTotalTime(){return new Date-start}join(e){var t=this.checkpoints+e.checkpoints;this.checkpoints=t.sort((e,t)=>t.time-e.time)}getHeader(){var e=[];return this.checkpoints.forEach(t=>{var r=[t.name];Object.keys(t).forEach(e=>{"name"!=e&&"time"!=e&&r.push(`${e}=${t[e]}`)}),e.push(r.join(";"))}),e.join(",")}},t.cookies=s,t.response=i,t.secrets=o},function(e,t,r){"use strict";r.r(t);var n=r(0);const s=r(2);async function a(e){const t=new s;t.get("/",()=>new Response("Specify a provider")),t.get("/cloudflare.*",e=>async function(e){try{let t,r,s=new URL(e.url),a=s.pathname.split("/")[2],o=s.pathname.split("/")[3];t=null!==s.pathname.split("/")[4]?s.pathname.split("/")[4]:0,r=null!==s.pathname.split("/")[5]?s.pathname.split("/")[5]:0;let i=s.pathname.split("/")[7],c={},l={},h={},u="https://",p="cloudflare-dns.com/dns-query";if(o){let e={};return e="normal"===i?new URL(u+p):"security"===i?new URL(u+"security."+p):"family"===i?new URL(u+"family."+p):new URL(u+p),e.searchParams.set("name",a),e.searchParams.set("type",o.toLowerCase()),e.searchParams.set("do",t),e.searchParams.set("cd",r),c={headers:{Accept:"application/dns-json"}},h=await fetch(e.href,c),n.response.json(await h.json())}return l=a,new Response("Please specify a type",c)}catch(e){return new Response(JSON.stringify({message:e.message,stack:e.stack}),{headers:{"Content-Type":"application/json"}})}}(e)),t.get("/google.*",e=>async function(e){try{let t,r,s=new URL(e.url),a=s.pathname.split("/")[2],o=s.pathname.split("/")[3];t=null!=s.pathname.split("/")[4]?s.pathname.split("/")[4]:0,r=null!=s.pathname.split("/")[5]?s.pathname.split("/")[5]:0;let i={},c={},l={};if(o){let e=new URL("https://dns.google/resolve");return e.searchParams.set("name",a),e.searchParams.set("type",o.toLowerCase()),e.searchParams.set("do",t),e.searchParams.set("cd",r),l=await fetch(e.href,i),n.response.json(await l.json())}return c=a,new Response("Please specify a type",i)}catch(e){return new Response(JSON.stringify({message:e.message,stack:e.stack}),{headers:{"Content-Type":"application/json"}})}}(e));return await t.route(e)}addEventListener("fetch",e=>"OPTIONS"==e.request.method?e.respondWith(n.response.cors()):e.respondWith(a(e.request)))},function(e,t){const r=e=>t=>t.method.toLowerCase()===e.toLowerCase(),n=r("connect"),s=r("delete"),a=r("get"),o=r("head"),i=r("options"),c=r("patch"),l=r("post"),h=r("put"),u=r("trace"),p=e=>t=>{const r=new URL(t.url).pathname;return(r.match(e)||[])[0]===r};e.exports=class{constructor(){this.routes=[]}handle(e,t){return this.routes.push({conditions:e,handler:t}),this}connect(e,t){return this.handle([n,p(e)],t)}delete(e,t){return this.handle([s,p(e)],t)}get(e,t){return this.handle([a,p(e)],t)}head(e,t){return this.handle([o,p(e)],t)}options(e,t){return this.handle([i,p(e)],t)}patch(e,t){return this.handle([c,p(e)],t)}post(e,t){return this.handle([l,p(e)],t)}put(e,t){return this.handle([h,p(e)],t)}trace(e,t){return this.handle([u,p(e)],t)}all(e){return this.handle([],e)}route(e){const t=this.resolve(e);return t?t.handler(e):new Response("resource not found",{status:404,statusText:"not found",headers:{"content-type":"text/plain"}})}resolve(e){return this.routes.find(t=>!(t.conditions&&(!Array.isArray(t)||t.conditions.length))||("function"==typeof t.conditions?t.conditions(e):t.conditions.every(t=>t(e))))}}},function(e,t,r){"use strict";
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},s=t||{},o=e.split(a),c=s.decode||n,l=0;l<o.length;l++){var h=o[l],u=h.indexOf("=");if(!(u<0)){var p=h.substr(0,u).trim(),d=h.substr(++u,h.length).trim();'"'==d[0]&&(d=d.slice(1,-1)),null==r[p]&&(r[p]=i(d,c))}}return r},t.serialize=function(e,t,r){var n=r||{},a=n.encode||s;if("function"!=typeof a)throw new TypeError("option encode is invalid");if(!o.test(e))throw new TypeError("argument name is invalid");var i=a(t);if(i&&!o.test(i))throw new TypeError("argument val is invalid");var c=e+"="+i;if(null!=n.maxAge){var l=n.maxAge-0;if(isNaN(l)||!isFinite(l))throw new TypeError("option maxAge is invalid");c+="; Max-Age="+Math.floor(l)}if(n.domain){if(!o.test(n.domain))throw new TypeError("option domain is invalid");c+="; Domain="+n.domain}if(n.path){if(!o.test(n.path))throw new TypeError("option path is invalid");c+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");c+="; Expires="+n.expires.toUTCString()}n.httpOnly&&(c+="; HttpOnly");n.secure&&(c+="; Secure");if(n.sameSite){switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;case"none":c+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return c};var n=decodeURIComponent,s=encodeURIComponent,a=/; */,o=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function i(e,t){try{return t(e)}catch(t){return e}}}]);