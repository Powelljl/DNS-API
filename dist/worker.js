!function(e){var t={};function s(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=1)}([function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(3),n=s(4);const a={jar:class{constructor(e){this.request=e,this.cookies=e?n.parse(e.headers.get("cookie")||""):{},this.futureCookies={}}get(e){return this.cookies[e]}set(e,t,s){this.futureCookies[e]={value:t,...s}}__remove(){}values(){var e=[];for(const[t,s]of Object.entries(this.futureCookies))e.push(n.serialize(t,s.value,s));return e}}};function o(e){var t="",s="0123456789abcdef";return new Uint8Array(e).forEach(e=>{t+=s[e>>4]+s[15&e]}),t}const i={uuidv4:()=>([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)),async hashPassword(e,t){var s=(t=t||{}).salt||crypto.getRandomValues(new Uint8Array(8)),r=t.iterations||45e3;"string"==typeof s&&(s=function(e){(e=e.replace(/^0x/,"")).length%2!=0&&console.log("WARNING: expecting an even number of characters in the hexString");var t=e.match(/[G-Z\s]/i);t&&console.log("WARNING: found non-hex characters",t);var s=e.match(/[\dA-F]{2}/gi).map((function(e){return parseInt(e,16)}));return new Uint8Array(s).buffer}(s));const n=new TextEncoder("utf-8").encode(e),a=await crypto.subtle.importKey("raw",n,{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),i=await crypto.subtle.deriveKey({name:"PBKDF2",salt:s,iterations:r,hash:"SHA-256"},a,{name:"AES-CBC",length:256},!0,["encrypt","decrypt"]);return`$PBKDF2;h=${o(await crypto.subtle.exportKey("raw",i))};s=${o(s)};i=${r};`},async validatePassword(e,t){for(var s={salt:t.split(";s=")[1].split(";")[0],iterations:t.split(";i=")[1].split(";")[0]},r=await this.hashPassword(e,s),n=!0,a=0;a<r.length;a++)r.charAt(a)!=t.charAt(a)&&(n=!1);return n}},c={version:"0.2.5",config:{secretKey:"password",debugHeaders:!1},accessControl:{allowOrigin:"*",allowMethods:"GET, POST, PUT",allowHeaders:"Content-Type"},request:null,_corsHeaders(){var e=this.accessControl.allowOrigin;return this.request&&(e=new URL(this.request.url).origin),{"Access-Control-Allow-Origin":e,"Access-Control-Allow-Methods":this.accessControl.allowMethods,"Access-Control-Max-Age":"1728000"}},injectCors(e,t){this._corsHeaders()},_genericResponse(e,t,s){void 0===s&&(s={});var r=s.headers||{},n=s.status||200,a=s.statusText||"OK",o=s.autoCors;void 0===s.autoCors&&(o=!0);var i=s.cookies||null,c=s.stopwatch||null,h={"Content-Type":e,...r};o&&(h={...h,...this._corsHeaders()});var l=new Response(t,{status:n,statusText:a,headers:h});return i&&i.values().forEach(e=>{l.headers.append("Set-Cookie",e)}),c&&l.headers.set("Server-Timing",c.getHeader()),this.config.debugHeaders&&l.headers.set("x-cfw-eu-version",this.version),l},cors(e){return e&&(this.request=e),new Response(null,{headers:this._corsHeaders()})},json(e,t){var s=e;return"string"!=typeof s&&(s=JSON.stringify(e)),this._genericResponse("application/json",s,t)},html(e,t){return this._genericResponse("text/html",e,t)},text(e,t){return this._genericResponse("plain/text",e,t)},fromResponse(e,t){var s={...this.headersToObject(e.headers),...t.headers||{}};"headers"in t&&delete t.headers;var r=JSON.parse(JSON.stringify(s["content-type"]));return"content-type"in s&&delete s["content-type"],this._genericResponse(r,e.body,{headers:s,...t})},async static(e,t){var s=t.baseUrl;if(!s)throw"You need to specify a baseUrl for response.static to work.";let r=new URL(e.url);var n=await fetch(`${s}${r.pathname.replace(t.routePrefix||"<>","")}`,{cf:{cacheTtl:t.ttl||600}});return this.fromResponse(n,t)},websocket:async e=>new Response(null,{status:101,webSocket:e.client}),setHeader(e,t,s){var r=new Response(e.body,e),n=s;return"function"==typeof s.values?(n=s.values()).forEach(e=>{r.headers.append(t,e)}):r.headers.append(t,n),r},headersToObject:e=>Object.fromEntries(e.entries())};t.Stopwatch=class{constructor(){this.start=new Date,this.checkpoints=[{name:"Start",dur:0,desc:"Started recording"}],this.lastCheckpointTime=new Date}mark(e,t){console.log("Last checkpoint: ",this.lastCheckpointTime),console.log(new Date),console.log("Difference: ",new Date-this.lastCheckpointTime),this.checkpoints.push({name:e,time:new Date,dur:new Date-this.lastCheckpointTime,...t}),this.lastCheckpointTime=new Date}getTotalTime(){return new Date-this.start}join(e){var t=this.checkpoints+e.checkpoints;this.checkpoints=t.sort((e,t)=>t.time-e.time)}getHeader(){var e=[];return this.checkpoints.forEach(t=>{var s=[t.name];Object.keys(t).forEach(e=>{"name"!=e&&"time"!=e&&s.push(`${e}=${t[e]}`)}),e.push(s.join(";"))}),e.join(",")}},t.WebsocketResponse=class{constructor(){let e=new WebSocketPair;this.socket=e[1],this.client=e[0],this.socket.accept(),this.emitter=r.createNanoEvents(),this.session={history:[],startTime:new Date,lastMessageTime:null},this.socket.addEventListener("message",e=>{var t=e.data;try{"string"==typeof(t=JSON.stringify(t))&&(t=e.data)}catch(e){}this.session.lastMessageTime=new Date,this.emitter.emit("message",t)}),this.socket.addEventListener("close",()=>this.emitter.emit("close"))}on(e,t){return this.emitter.on(e,t)}send(e,t){var s=e;e.constructor!=Object&&e.constructor!=Array||(s=JSON.stringify(s)),this.socket.send(s)}},t.cookies=a,t.response=c,t.secrets=i},function(e,t,s){"use strict";s.r(t);var r=s(0);const n=s(2);async function a(e){const t=new n;t.get("/",()=>new Response("Specify a provider")),t.get("/api/dns/cloudflare.*",e=>async function(e){try{let t,s,n=new URL(e.url),a=n.pathname.split("/")[4],o=n.pathname.split("/")[5];t=null!==n.pathname.split("/")[6]?n.pathname.split("/")[6]:0,s=null!==n.pathname.split("/")[7]?n.pathname.split("/")[7]:0;let i=n.pathname.split("/")[8],c={},h={},l={},u="https://",p="cloudflare-dns.com/dns-query";if(o){let e={};return e="normal"===i?new URL(u+p):"security"===i?new URL(u+"security."+p):"family"===i?new URL(u+"family."+p):new URL(u+p),e.searchParams.set("name",a),e.searchParams.set("type",o.toLowerCase()),e.searchParams.set("do",t),e.searchParams.set("cd",s),c={headers:{Accept:"application/dns-json"}},l=await fetch(e.href,c),r.response.json(await l.json())}return h=a,new Response("Please specify a type",c)}catch(e){return new Response(JSON.stringify({message:e.message,stack:e.stack}),{headers:{"Content-Type":"application/json"}})}}(e)),t.get("/api/dns/google.*",e=>async function(e){try{let t,s,n=new URL(e.url),a=n.pathname.split("/")[4],o=n.pathname.split("/")[5];t=null!=n.pathname.split("/")[6]?n.pathname.split("/")[6]:0,s=null!=n.pathname.split("/")[7]?n.pathname.split("/")[7]:0;let i={},c={},h={};if(o){let e=new URL("https://dns.google/resolve");return e.searchParams.set("name",a),e.searchParams.set("type",o.toLowerCase()),e.searchParams.set("do",t),e.searchParams.set("cd",s),h=await fetch(e.href,i),r.response.json(await h.json())}return c=a,new Response("Please specify a type",i)}catch(e){return new Response(JSON.stringify({message:e.message,stack:e.stack}),{headers:{"Content-Type":"application/json"}})}}(e));return await t.route(e)}addEventListener("fetch",e=>"OPTIONS"==e.request.method?e.respondWith(r.response.cors()):e.respondWith(a(e.request)))},function(e,t){const s=e=>t=>t.method.toLowerCase()===e.toLowerCase(),r=s("connect"),n=s("delete"),a=s("get"),o=s("head"),i=s("options"),c=s("patch"),h=s("post"),l=s("put"),u=s("trace"),p=e=>t=>{const s=new URL(t.url).pathname;return(s.match(e)||[])[0]===s};e.exports=class{constructor(){this.routes=[]}handle(e,t){return this.routes.push({conditions:e,handler:t}),this}connect(e,t){return this.handle([r,p(e)],t)}delete(e,t){return this.handle([n,p(e)],t)}get(e,t){return this.handle([a,p(e)],t)}head(e,t){return this.handle([o,p(e)],t)}options(e,t){return this.handle([i,p(e)],t)}patch(e,t){return this.handle([c,p(e)],t)}post(e,t){return this.handle([h,p(e)],t)}put(e,t){return this.handle([l,p(e)],t)}trace(e,t){return this.handle([u,p(e)],t)}all(e){return this.handle([],e)}route(e){const t=this.resolve(e);return t?t.handler(e):new Response("resource not found",{status:404,statusText:"not found",headers:{"content-type":"text/plain"}})}resolve(e){return this.routes.find(t=>!(t.conditions&&(!Array.isArray(t)||t.conditions.length))||("function"==typeof t.conditions?t.conditions(e):t.conditions.every(t=>t(e))))}}},function(e,t,s){"use strict";s.r(t),s.d(t,"createNanoEvents",(function(){return r}));let r=()=>({events:{},emit(e,...t){(this.events[e]||[]).forEach(e=>e(...t))},on(e,t){return(this.events[e]=this.events[e]||[]).push(t),()=>this.events[e]=(this.events[e]||[]).filter(e=>e!==t)}})},function(e,t,s){"use strict";
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var s={},n=t||{},o=e.split(a),c=n.decode||r,h=0;h<o.length;h++){var l=o[h],u=l.indexOf("=");if(!(u<0)){var p=l.substr(0,u).trim(),d=l.substr(++u,l.length).trim();'"'==d[0]&&(d=d.slice(1,-1)),null==s[p]&&(s[p]=i(d,c))}}return s},t.serialize=function(e,t,s){var r=s||{},a=r.encode||n;if("function"!=typeof a)throw new TypeError("option encode is invalid");if(!o.test(e))throw new TypeError("argument name is invalid");var i=a(t);if(i&&!o.test(i))throw new TypeError("argument val is invalid");var c=e+"="+i;if(null!=r.maxAge){var h=r.maxAge-0;if(isNaN(h)||!isFinite(h))throw new TypeError("option maxAge is invalid");c+="; Max-Age="+Math.floor(h)}if(r.domain){if(!o.test(r.domain))throw new TypeError("option domain is invalid");c+="; Domain="+r.domain}if(r.path){if(!o.test(r.path))throw new TypeError("option path is invalid");c+="; Path="+r.path}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");c+="; Expires="+r.expires.toUTCString()}r.httpOnly&&(c+="; HttpOnly");r.secure&&(c+="; Secure");if(r.sameSite){switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;case"none":c+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return c};var r=decodeURIComponent,n=encodeURIComponent,a=/; */,o=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function i(e,t){try{return t(e)}catch(t){return e}}}]);